<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.ssafy.pjt.Repository.mapper.RoomMapper">
	<!--방의 맴버 조회-->
	<select id="roomjoinMemeber" parameterType="int" resultType="map">
		select r.rid, m.uid, m.email, m.name, m.role
		from room r join entrant e
		on r.rid = e.rid
		right join member m
		on e.uid = m.uid
		where r.rid = #{rid};
	</select>
	
	<!--방의 평가 목록 조회   -->
	<select id="roomJoinEvaluation" parameterType="int" resultType="map">
		select r.rid, m.uid, m.name, r.room_name, (select m.name from member m where m.uid = r.uid) as founder, ev.vid, ev.eval_date, ev.attention, ev.participation, ev.distracted, ev.asleep, ev.afk, ev.attend_time, ev.ranking
		from room r join entrant e
		on r.rid = e.rid
		right join evaluation ev
		on e.eid = ev.eid
		left join member m
		on e.uid = m.uid
		where r.rid = #{rid};
	</select>
	

</mapper>